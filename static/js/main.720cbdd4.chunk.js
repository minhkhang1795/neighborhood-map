(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,t,n){e.exports=n(354)},153:function(e,t,n){},155:function(e,t,n){},354:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(62),r=n.n(i),c=n(356),s=(n(153),n(17)),l=n(18),u=n(20),d=n(19),p=n(21),f=(n(155),n(143)),h=n.n(f),m=n(87),y=n(37),v=Object(m.a)(Object(m.b)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCx7CZ1P0YdqirwlJ4jPdrMO20NQwSPkbI&v=3.exp&libraries=geometry,drawing,places",loadingElement:o.a.createElement("div",{style:{height:"100%"}}),containerElement:o.a.createElement("div",{style:{height:"100%"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}})}),y.withScriptjs,y.withGoogleMap)(function(e){return o.a.createElement(y.GoogleMap,{defaultZoom:15,defaultCenter:e.ll,defaultOptions:b},e.isMarkerShown&&e.places&&e.places.constructor===Array&&e.places.map(function(t){return o.a.createElement(y.Marker,{key:t.venue.id,position:{lat:t.venue.location.lat,lng:t.venue.location.lng},onClick:function(){return e.onMarkerClick(t.venue.id)}})}),e.isMarkerShown&&e.focusedPlace&&e.focusedPlace&&e.focusedPlace.location&&o.a.createElement(y.InfoWindow,{position:{lat:e.focusedPlace.location.lat,lng:e.focusedPlace.location.lng},onCloseClick:e.onToggleClose},o.a.createElement("div",{className:"info-window",tabIndex:0},o.a.createElement("h3",null,e.focusedPlace.name),o.a.createElement("p",null,e.focusedPlace.location.formattedAddress[0]+(e.focusedPlace.location.formattedAddress[1]?", "+e.focusedPlace.location.formattedAddress[1]:"")),e.focusedPlace.bestPhoto&&o.a.createElement("img",{src:e.focusedPlace.bestPhoto.prefix+"300x300"+e.focusedPlace.bestPhoto.suffix,alt:"Image of "+e.focusedPlace.name}))))}),g=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(v,{ll:this.props.ll,isMarkerShown:this.props.isMarkerShown,places:this.props.places,focusedPlace:this.props.focusedPlace,onMarkerClick:function(t){return e.props.onUpdateFocusedPlace(t)},onToggleClose:this.props.clearFocusedPlace})}}]),t}(o.a.PureComponent),b={mapTypeControl:!1,styles:[{featureType:"administrative",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"water",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"all",stylers:[{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"road.arterial",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#5f94ff"},{lightness:26},{gamma:5.86}]},{featureType:"road.highway",elementType:"all",stylers:[{weight:.6},{saturation:-85},{lightness:61}]},{featureType:"landscape",elementType:"all",stylers:[{hue:"#0066ff"},{saturation:74},{lightness:100}]}]},P=g,w=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{tabIndex:this.props.isHidden?-1:0,role:"search",className:"panel-top"},o.a.createElement("i",{className:"fas fa-search common-icon"}),o.a.createElement("input",{tabIndex:this.props.isHidden?-1:0,className:"searchbar-input",type:"search","aria-label":"Search your neighborhood",placeholder:"Search your neighborhood",value:this.props.query,onChange:function(t){return e.props.onQueryChange(t)}}))}}]),t}(a.Component),E=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleOnKeyPressed=function(e,t){"Enter"===e.key&&this.props.onUpdateFocusedPlace(t.venue.id)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.places;return o.a.createElement("div",{className:"search-result-grid"},o.a.createElement("ol",{tabIndex:this.props.isHidden?-1:0},t&&t.constructor===Array&&t.map(function(t){return o.a.createElement("li",{tabIndex:e.props.isHidden?-1:0,key:t.venue.id,onClick:function(){return e.props.onUpdateFocusedPlace(t.venue.id)},onKeyPress:function(n){return e.handleOnKeyPressed(n,t)}},t.venue.name)})))}}]),t}(a.Component),k=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={visibility:"show"},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"closePanel",value:function(e){e.preventDefault(),this.refs.hideButton.tabIndex=-1,this.setState({visibility:"hide"})}},{key:"openPanel",value:function(e){e.preventDefault(),this.refs.hideButton.tabIndex=0,this.setState({visibility:"show"})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,"hide"===this.state.visibility&&o.a.createElement("button",{ref:"showButton",className:"panel-show-btn","aria-label":"show button",onClick:function(t){return e.openPanel(t)}},o.a.createElement("i",{className:"fas fa-chevron-right common-icon"})),o.a.createElement("div",{className:"panel-content "+this.state.visibility},o.a.createElement("div",{className:"panel-main"},o.a.createElement(w,{query:this.props.query,onQueryChange:function(t){return e.props.onQueryChange(t)},isHidden:"hide"===this.state.visibility}),0===this.props.places.length&&o.a.createElement("p",{tabIndex:this.props.isHidden?-1:0,className:"filter-no-result"},"No results found."),o.a.createElement(E,{onUpdateFocusedPlace:function(t){return e.props.onUpdateFocusedPlace(t)},places:this.props.places,isHidden:"hide"===this.state.visibility})),o.a.createElement("div",{className:"panel-bottom"},o.a.createElement("button",{ref:"hideButton",className:"panel-hide-btn",role:"button",onClick:function(t){return e.closePanel(t)}},o.a.createElement("i",{className:"fas fa-chevron-left common-icon"})," Hide"))))}}]),t}(a.Component),O="https://api.foursquare.com/v2/",j="VE10SB3UPIQ23AG3G5AIEHOPDIQKWO1BZXZTK3LOI0HWTS4G",T="RUWR5CLLYIUMKWN3X1W0P2VX1KRQALEIPR4SPRWSN3C4W0PU",C=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={places:[],focusedPlace:null,query:""},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getPlaces("coffee")}},{key:"updateQuery",value:function(e){this.setState({query:e.trim()})}},{key:"getPlaces",value:function(e){var t=this;(function(e,t,n){return fetch("".concat(O,"/venues/explore/?client_id=").concat(j,"&client_secret=").concat(T,"&v=20180323&limit=25&ll=").concat(e,",").concat(t,"&query=").concat(n)).then(function(e){return e.json()}).then(function(e){return e.response.groups[0].items}).catch(function(e){return e})})(42.3784207,-71.1304621,e).then(function(e){console.log(e),t.setState({places:e})})}},{key:"updateFocusedPlace",value:function(e){var t=this.state.places,n=t.findIndex(function(t){return t.venue.id===e});n>=0&&(this.setState({focusedPlace:t[n].venue}),t[n].venue.updated||this.fetchFocusedPlaceDetail(e,n,t))}},{key:"fetchFocusedPlaceDetail",value:function(e,t,n){var a,o=this;(a=e,fetch("".concat(O,"/venues/").concat(a,"/?client_id=").concat(j,"&client_secret=").concat(T,"&v=20180323")).then(function(e){return e.json()}).then(function(e){return e.response.venue}).catch(function(e){return e})).then(function(e){console.log(e),e&&e.location&&(n[t].venue=e,n[t].venue.updated=!0,o.setState({places:n,focusedPlace:e}))}).catch(function(e){console.log(e)})}},{key:"clearFocusedPlace",value:function(){this.setState({focusedPlace:null})}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.places,i=n.focusedPlace,r=n.query;if(r){var c=new RegExp(h()(r),"i");e=a.filter(function(e){return c.test(e.venue.name)})}else e=a;return o.a.createElement("div",null,o.a.createElement("div",{className:"map-container"},o.a.createElement(P,{ll:{lat:42.3784207,lng:-71.1304621},isMarkerShown:!0,onUpdateFocusedPlace:function(e){return t.updateFocusedPlace(e)},places:e,focusedPlace:i,clearFocusedPlace:function(){return t.clearFocusedPlace()}})),o.a.createElement(k,{places:e,query:r,onQueryChange:function(e){return t.updateQuery(e.target.value)},onUpdateFocusedPlace:function(e){return t.updateFocusedPlace(e)}}))}}]),t}(a.Component),S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function I(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var N=n(145);n.n(N).a.load({google:{families:["Montserrat","sans-serif"]}}),r.a.render(o.a.createElement(c.a,{basename:"/neighborhood-map/"},o.a.createElement(C,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/neighborhood-map",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/neighborhood-map","/service-worker.js");S?(function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):I(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):I(t,e)})}}()}},[[148,2,1]]]);
//# sourceMappingURL=main.720cbdd4.chunk.js.map